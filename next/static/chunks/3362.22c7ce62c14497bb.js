"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3362],{42472:function(e,t,r){r.d(t,{Z:function(){return n}});function n(e,t){if(t.length<e)throw TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}},42101:function(e,t,r){r.d(t,{Z:function(){return i}});var n=r(56907),a=r(42472);function i(e){return(0,a.Z)(1,arguments),Math.floor(function(e){return(0,a.Z)(1,arguments),(0,n.Z)(e).getTime()}(e)/1e3)}},40480:function(e,t,r){r.d(t,{Z:function(){return g}});var n=r(56907),a=r(42472);function i(e,t){(0,a.Z)(2,arguments);var r=(0,n.Z)(e),i=(0,n.Z)(t),s=r.getTime()-i.getTime();return s<0?-1:s>0?1:s}var s=r(25190);function o(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function u(e,t){if((0,a.Z)(2,arguments),!t||"object"!==(0,s.Z)(t))return new Date(NaN);var r=t.years?o(t.years):0,i=t.months?o(t.months):0,u=t.weeks?o(t.weeks):0,l=t.days?o(t.days):0,c=t.hours?o(t.hours):0,d=t.minutes?o(t.minutes):0,f=t.seconds?o(t.seconds):0,p=(0,n.Z)(e),h=i||r?function(e,t){(0,a.Z)(2,arguments);var r=(0,n.Z)(e),i=o(t);if(isNaN(i))return new Date(NaN);if(!i)return r;var s=r.getDate(),u=new Date(r.getTime());return(u.setMonth(r.getMonth()+i+1,0),s>=u.getDate())?u:(r.setFullYear(u.getFullYear(),u.getMonth(),s),r)}(p,i+12*r):p;return new Date((l||u?function(e,t){(0,a.Z)(2,arguments);var r=(0,n.Z)(e),i=o(t);return isNaN(i)?new Date(NaN):(i&&r.setDate(r.getDate()+i),r)}(h,l+7*u):h).getTime()+1e3*(f+60*(d+60*c)))}function l(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function c(e){(0,a.Z)(1,arguments);var t=(0,n.Z)(e);return t.setHours(0,0,0,0),t}function d(e,t){var r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function f(e,t){return(0,a.Z)(2,arguments),(0,n.Z)(e).getTime()-(0,n.Z)(t).getTime()}var p={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}};function h(e){return e?p[e]:p.trunc}function g(e){(0,a.Z)(1,arguments);var t=(0,n.Z)(e.start),r=(0,n.Z)(e.end);if(isNaN(t.getTime()))throw RangeError("Start Date is invalid");if(isNaN(r.getTime()))throw RangeError("End Date is invalid");var s={};s.years=Math.abs(function(e,t){(0,a.Z)(2,arguments);var r=(0,n.Z)(e),s=(0,n.Z)(t),o=i(r,s),u=Math.abs(function(e,t){(0,a.Z)(2,arguments);var r=(0,n.Z)(e),i=(0,n.Z)(t);return r.getFullYear()-i.getFullYear()}(r,s));r.setFullYear(1584),s.setFullYear(1584);var l=i(r,s)===-o,c=o*(u-Number(l));return 0===c?0:c}(r,t));var o=i(r,t),p=u(t,{years:o*s.years});s.months=Math.abs(function(e,t){(0,a.Z)(2,arguments);var r,s=(0,n.Z)(e),o=(0,n.Z)(t),u=i(s,o),l=Math.abs(function(e,t){(0,a.Z)(2,arguments);var r=(0,n.Z)(e),i=(0,n.Z)(t);return 12*(r.getFullYear()-i.getFullYear())+(r.getMonth()-i.getMonth())}(s,o));if(l<1)r=0;else{1===s.getMonth()&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-u*l);var c=i(s,o)===-u;(function(e){(0,a.Z)(1,arguments);var t=(0,n.Z)(e);return(function(e){(0,a.Z)(1,arguments);var t=(0,n.Z)(e);return t.setHours(23,59,59,999),t})(t).getTime()===(function(e){(0,a.Z)(1,arguments);var t=(0,n.Z)(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t})(t).getTime()})((0,n.Z)(e))&&1===l&&1===i(e,o)&&(c=!1),r=u*(l-Number(c))}return 0===r?0:r}(r,p));var g=u(p,{months:o*s.months});s.days=Math.abs(function(e,t){(0,a.Z)(2,arguments);var r=(0,n.Z)(e),i=(0,n.Z)(t),s=d(r,i),o=Math.abs(function(e,t){(0,a.Z)(2,arguments);var r=c(e),n=c(t);return Math.round((r.getTime()-l(r)-(n.getTime()-l(n)))/864e5)}(r,i));r.setDate(r.getDate()-s*o);var u=Number(d(r,i)===-s),f=s*(o-u);return 0===f?0:f}(r,g));var v=u(g,{days:o*s.days});s.hours=Math.abs(function(e,t,r){(0,a.Z)(2,arguments);var n=f(e,t)/36e5;return h(null==r?void 0:r.roundingMethod)(n)}(r,v));var y=u(v,{hours:o*s.hours});s.minutes=Math.abs(function(e,t,r){(0,a.Z)(2,arguments);var n=f(e,t)/6e4;return h(null==r?void 0:r.roundingMethod)(n)}(r,y));var m=u(y,{minutes:o*s.minutes});return s.seconds=Math.abs(function(e,t,r){(0,a.Z)(2,arguments);var n=f(e,t)/1e3;return h(null==r?void 0:r.roundingMethod)(n)}(r,m)),s}},56907:function(e,t,r){r.d(t,{Z:function(){return i}});var n=r(25190),a=r(42472);function i(e){(0,a.Z)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===(0,n.Z)(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):(("string"==typeof e||"[object String]"===t)&&"undefined"!=typeof console&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(Error().stack)),new Date(NaN))}},25190:function(e,t,r){r.d(t,{Z:function(){return n}});function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}},21262:function(e,t,r){r.d(t,{_:function(){return n}});function n(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}},7428:function(e,t,r){r.d(t,{g6:function(){return z}});let n={parse:JSON.parse,stringify:JSON.stringify};var a=r(54961),i=r(52193),s=r(74951);let o=e=>a(e)||null!==e&&"object"==typeof e&&"function"==typeof e.pipe;var u=(e,t,r,a=n)=>{let{clone:u,files:l}=i({query:e,variables:t,operationName:r},"",o);if(0===l.size){if(!Array.isArray(e))return a.stringify(u);if(void 0!==t&&!Array.isArray(t))throw Error("Cannot create request body with given variable type, array expected");let r=e.reduce((e,r,n)=>(e.push({query:r,variables:t?t[n]:void 0}),e),[]);return a.stringify(r)}let c=new("undefined"==typeof FormData?s:FormData);c.append("operations",a.stringify(u));let d={},f=0;return l.forEach(e=>{d[++f]=e}),c.append("map",a.stringify(d)),f=0,l.forEach((e,t)=>{c.append(`${++f}`,t)}),c};let l=e=>e.toUpperCase(),c=e=>{let t={};return e.forEach((e,r)=>{t[r]=e}),t},d=(e,t,r)=>e.document?e:{document:e,variables:t,requestHeaders:r,signal:void 0},f=(e,t,r)=>e.query?e:{query:e,variables:t,requestHeaders:r,signal:void 0},p=(e,t)=>e.documents?e:{documents:e,requestHeaders:t,signal:void 0};var h=r(91593),g=r(77800);let v=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function y(e){return m[e.charCodeAt(0)]}let m=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"];var b=r(65592),w=r(12113),S=r(68570),Z=r(11505);let q=Object.freeze({}),D={Name:{leave:e=>e.value},Variable:{leave:e=>"$"+e.name},Document:{leave:e=>k(e.definitions,"\n\n")},OperationDefinition:{leave(e){let t=N("(",k(e.variableDefinitions,", "),")"),r=k([e.operation,k([e.name,t]),k(e.directives," ")]," ");return("query"===r?"":r+" ")+e.selectionSet}},VariableDefinition:{leave:({variable:e,type:t,defaultValue:r,directives:n})=>e+": "+t+N(" = ",r)+N(" ",k(n," "))},SelectionSet:{leave:({selections:e})=>M(e)},Field:{leave({alias:e,name:t,arguments:r,directives:n,selectionSet:a}){let i=N("",e,": ")+t,s=i+N("(",k(r,", "),")");return s.length>80&&(s=i+N("(\n",T(k(r,"\n")),"\n)")),k([s,k(n," "),a]," ")}},Argument:{leave:({name:e,value:t})=>e+": "+t},FragmentSpread:{leave:({name:e,directives:t})=>"..."+e+N(" ",k(t," "))},InlineFragment:{leave:({typeCondition:e,directives:t,selectionSet:r})=>k(["...",N("on ",e),k(t," "),r]," ")},FragmentDefinition:{leave:({name:e,typeCondition:t,variableDefinitions:r,directives:n,selectionSet:a})=>`fragment ${e}${N("(",k(r,", "),")")} on ${t} ${N("",k(n," ")," ")}`+a},IntValue:{leave:({value:e})=>e},FloatValue:{leave:({value:e})=>e},StringValue:{leave:({value:e,block:t})=>t?(0,g.LZ)(e):`"${e.replace(v,y)}"`},BooleanValue:{leave:({value:e})=>e?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:e})=>e},ListValue:{leave:({values:e})=>"["+k(e,", ")+"]"},ObjectValue:{leave:({fields:e})=>"{"+k(e,", ")+"}"},ObjectField:{leave:({name:e,value:t})=>e+": "+t},Directive:{leave:({name:e,arguments:t})=>"@"+e+N("(",k(t,", "),")")},NamedType:{leave:({name:e})=>e},ListType:{leave:({type:e})=>"["+e+"]"},NonNullType:{leave:({type:e})=>e+"!"},SchemaDefinition:{leave:({description:e,directives:t,operationTypes:r})=>N("",e,"\n")+k(["schema",k(t," "),M(r)]," ")},OperationTypeDefinition:{leave:({operation:e,type:t})=>e+": "+t},ScalarTypeDefinition:{leave:({description:e,name:t,directives:r})=>N("",e,"\n")+k(["scalar",t,k(r," ")]," ")},ObjectTypeDefinition:{leave:({description:e,name:t,interfaces:r,directives:n,fields:a})=>N("",e,"\n")+k(["type",t,N("implements ",k(r," & ")),k(n," "),M(a)]," ")},FieldDefinition:{leave:({description:e,name:t,arguments:r,type:n,directives:a})=>N("",e,"\n")+t+(x(r)?N("(\n",T(k(r,"\n")),"\n)"):N("(",k(r,", "),")"))+": "+n+N(" ",k(a," "))},InputValueDefinition:{leave:({description:e,name:t,type:r,defaultValue:n,directives:a})=>N("",e,"\n")+k([t+": "+r,N("= ",n),k(a," ")]," ")},InterfaceTypeDefinition:{leave:({description:e,name:t,interfaces:r,directives:n,fields:a})=>N("",e,"\n")+k(["interface",t,N("implements ",k(r," & ")),k(n," "),M(a)]," ")},UnionTypeDefinition:{leave:({description:e,name:t,directives:r,types:n})=>N("",e,"\n")+k(["union",t,k(r," "),N("= ",k(n," | "))]," ")},EnumTypeDefinition:{leave:({description:e,name:t,directives:r,values:n})=>N("",e,"\n")+k(["enum",t,k(r," "),M(n)]," ")},EnumValueDefinition:{leave:({description:e,name:t,directives:r})=>N("",e,"\n")+k([t,k(r," ")]," ")},InputObjectTypeDefinition:{leave:({description:e,name:t,directives:r,fields:n})=>N("",e,"\n")+k(["input",t,k(r," "),M(n)]," ")},DirectiveDefinition:{leave:({description:e,name:t,arguments:r,repeatable:n,locations:a})=>N("",e,"\n")+"directive @"+t+(x(r)?N("(\n",T(k(r,"\n")),"\n)"):N("(",k(r,", "),")"))+(n?" repeatable":"")+" on "+k(a," | ")},SchemaExtension:{leave:({directives:e,operationTypes:t})=>k(["extend schema",k(e," "),M(t)]," ")},ScalarTypeExtension:{leave:({name:e,directives:t})=>k(["extend scalar",e,k(t," ")]," ")},ObjectTypeExtension:{leave:({name:e,interfaces:t,directives:r,fields:n})=>k(["extend type",e,N("implements ",k(t," & ")),k(r," "),M(n)]," ")},InterfaceTypeExtension:{leave:({name:e,interfaces:t,directives:r,fields:n})=>k(["extend interface",e,N("implements ",k(t," & ")),k(r," "),M(n)]," ")},UnionTypeExtension:{leave:({name:e,directives:t,types:r})=>k(["extend union",e,k(t," "),N("= ",k(r," | "))]," ")},EnumTypeExtension:{leave:({name:e,directives:t,values:r})=>k(["extend enum",e,k(t," "),M(r)]," ")},InputObjectTypeExtension:{leave:({name:e,directives:t,fields:r})=>k(["extend input",e,k(t," "),M(r)]," ")}};function k(e,t=""){var r;return null!==(r=null==e?void 0:e.filter(e=>e).join(t))&&void 0!==r?r:""}function M(e){return N("{\n",T(k(e,"\n")),"\n}")}function N(e,t,r=""){return null!=t&&""!==t?e+t+r:""}function T(e){return N("  ",e.replace(/\n/g,"\n  "))}function x(e){var t;return null!==(t=null==e?void 0:e.some(e=>e.includes("\n")))&&void 0!==t&&t}let C=e=>{let t;let r=e.definitions.filter(e=>"OperationDefinition"===e.kind);return 1===r.length&&(t=r[0]?.name?.value),t},j=e=>{if("string"==typeof e){let t;try{let r=(0,h.Qc)(e);t=C(r)}catch(e){}return{query:e,operationName:t}}let t=C(e);return{query:function(e,t,r=S.h8){let n,a,i;let s=new Map;for(let e of Object.values(Z.h))s.set(e,function(e,t){let r=e[t];return"object"==typeof r?r:"function"==typeof r?{enter:r,leave:void 0}:{enter:e.enter,leave:e.leave}}(t,e));let o=Array.isArray(e),u=[e],l=-1,c=[],d=e,f=[],p=[];do{var h,g,v;let e;let y=++l===u.length,m=y&&0!==c.length;if(y){if(a=0===p.length?void 0:f[f.length-1],d=i,i=p.pop(),m){if(o){d=d.slice();let e=0;for(let[t,r]of c){let n=t-e;null===r?(d.splice(n,1),e++):d[n]=r}}else for(let[e,t]of(d=Object.defineProperties({},Object.getOwnPropertyDescriptors(d)),c))d[e]=t}l=n.index,u=n.keys,c=n.edits,o=n.inArray,n=n.prev}else if(i){if(null==(d=i[a=o?l:u[l]]))continue;f.push(a)}if(!Array.isArray(d)){(0,S.UG)(d)||(0,b.a)(!1,`Invalid AST Node: ${(0,w.X)(d)}.`);let r=y?null===(h=s.get(d.kind))||void 0===h?void 0:h.leave:null===(g=s.get(d.kind))||void 0===g?void 0:g.enter;if((e=null==r?void 0:r.call(t,d,a,i,f,p))===q)break;if(!1===e){if(!y){f.pop();continue}}else if(void 0!==e&&(c.push([a,e]),!y)){if((0,S.UG)(e))d=e;else{f.pop();continue}}}void 0===e&&m&&c.push([a,d]),y?f.pop():(n={inArray:o,index:l,keys:u,edits:c,prev:n},u=(o=Array.isArray(d))?d:null!==(v=r[d.kind])&&void 0!==v?v:[],l=-1,c=[],i&&p.push(i),i=d)}while(void 0!==n);return 0!==c.length?c[c.length-1][1]:e}(e,D),operationName:t}};class E extends Error{constructor(e,t){super(`${E.extractMessage(e)}: ${JSON.stringify({response:e,request:t})}`),Object.setPrototypeOf(this,E.prototype),this.response=e,this.request=t,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,E)}static extractMessage(e){return e.errors?.[0]?.message??`GraphQL Error (Code: ${e.status})`}}var O=r(52830),A=r.t(O,2);let F="ping",H="pong",$="complete";class I{get type(){return this._type}get id(){return this._id}get payload(){return this._payload}constructor(e,t,r){this._type=e,this._payload=t,this._id=r}get text(){let e={type:this.type};return null!=this.id&&void 0!=this.id&&(e.id=this.id),null!=this.payload&&void 0!=this.payload&&(e.payload=this.payload),JSON.stringify(e)}static parse(e,t){let{type:r,payload:n,id:a}=JSON.parse(e);return new I(r,t(n),a)}}class P{constructor(e,{onInit:t,onAcknowledged:r,onPing:n,onPong:a}){this.socketState={acknowledged:!1,lastRequestId:0,subscriptions:{}},this.socket=e,e.onopen=async r=>{this.socketState.acknowledged=!1,this.socketState.subscriptions={},e.send(new I("connection_init",t?await t():null).text)},e.onclose=e=>{this.socketState.acknowledged=!1,this.socketState.subscriptions={}},e.onerror=e=>{console.error(e)},e.onmessage=t=>{try{let i=function(e,t=e=>e){return I.parse(e,t)}(t.data);switch(i.type){case"connection_ack":this.socketState.acknowledged?console.warn("Duplicate CONNECTION_ACK message ignored"):(this.socketState.acknowledged=!0,r&&r(i.payload));return;case F:n?n(i.payload).then(t=>e.send(Y(t).text)):e.send(Y(null).text);return;case H:a&&a(i.payload);return}if(!this.socketState.acknowledged||void 0===i.id||null===i.id||!this.socketState.subscriptions[i.id])return;let{query:s,variables:o,subscriber:u}=this.socketState.subscriptions[i.id];switch(i.type){case"next":!i.payload.errors&&i.payload.data&&u.next&&u.next(i.payload.data),i.payload.errors&&u.error&&u.error(new E({...i.payload,status:200},{query:s,variables:o}));return;case"error":u.error&&u.error(new E({errors:i.payload,status:200},{query:s,variables:o}));return;case $:u.complete&&u.complete(),delete this.socketState.subscriptions[i.id];return}}catch(t){console.error(t),e.close(1006)}e.close(4400,"Unknown graphql-ws message.")}}makeSubscribe(e,t,r,n){let a=(this.socketState.lastRequestId++).toString();return this.socketState.subscriptions[a]={query:e,variables:n,subscriber:r},this.socket.send(new I("subscribe",{query:e,operationName:t,variables:n},a).text),()=>{this.socket.send(new I($,void 0,a).text),delete this.socketState.subscriptions[a]}}rawRequest(e,t){return new Promise((r,n)=>{let a;this.rawSubscribe(e,{next:(e,t)=>a={data:e,extensions:t},error:n,complete:()=>r(a)},t)})}request(e,t){return new Promise((r,n)=>{let a;this.subscribe(e,{next:e=>a=e,error:n,complete:()=>r(a)},t)})}subscribe(e,t,r){let{query:n,operationName:a}=j(e);return this.makeSubscribe(n,a,t,r)}rawSubscribe(e,t,r){return this.makeSubscribe(e,void 0,t,r)}ping(e){this.socket.send(new I(F,e,void 0).text)}close(){this.socket.close(1e3)}}function Y(e){return new I(H,e,void 0)}P.PROTOCOL="graphql-transport-ws";let _=e=>{let t={};return e&&("undefined"!=typeof Headers&&e instanceof Headers||A&&O.Headers&&e instanceof O.Headers?t=c(e):Array.isArray(e)?e.forEach(([e,r])=>{e&&void 0!==r&&(t[e]=r)}):t=e),t},R=e=>e.replace(/([\s,]|#[^\n\r]+)+/g," ").trim(),U=e=>{if(!Array.isArray(e.query)){let t=[`query=${encodeURIComponent(R(e.query))}`];return e.variables&&t.push(`variables=${encodeURIComponent(e.jsonSerializer.stringify(e.variables))}`),e.operationName&&t.push(`operationName=${encodeURIComponent(e.operationName)}`),t.join("&")}if(void 0!==e.variables&&!Array.isArray(e.variables))throw Error("Cannot create query with given variable type, array expected");let t=e.query.reduce((t,r,n)=>(t.push({query:R(r),variables:e.variables?e.jsonSerializer.stringify(e.variables[n]):void 0}),t),[]);return`query=${encodeURIComponent(e.jsonSerializer.stringify(t))}`},V=e=>async t=>{let r;let{url:a,query:i,variables:s,operationName:o,fetch:l,fetchOptions:c,middleware:d}=t,f={...t.headers},p="";"POST"===e?"string"==typeof(r=u(i,s,o,c.jsonSerializer))&&(f["Content-Type"]="application/json"):p=U({query:i,variables:s,operationName:o,jsonSerializer:c.jsonSerializer??n});let h={method:e,headers:f,body:r,...c},g=a,v=h;if(d){let{url:e,...t}=await Promise.resolve(d({...h,url:a,operationName:o,variables:s}));g=e,v=t}return p&&(g=`${g}?${p}`),await l(g,v)};class z{constructor(e,t={}){this.url=e,this.requestConfig=t,this.rawRequest=async(...e)=>{let[t,r,n]=e,a=f(t,r,n),{headers:i,fetch:s=O,method:o="POST",requestMiddleware:u,responseMiddleware:l,...c}=this.requestConfig,{url:d}=this;void 0!==a.signal&&(c.signal=a.signal);let{operationName:p}=j(a.query);return L({url:d,query:a.query,variables:a.variables,headers:{..._(J(i)),..._(a.requestHeaders)},operationName:p,fetch:s,method:o,fetchOptions:c,middleware:u}).then(e=>(l&&l(e),e)).catch(e=>{throw l&&l(e),e})}}async request(e,...t){let[r,n]=t,a=d(e,r,n),{headers:i,fetch:s=O,method:o="POST",requestMiddleware:u,responseMiddleware:l,...c}=this.requestConfig,{url:f}=this;void 0!==a.signal&&(c.signal=a.signal);let{query:p,operationName:h}=j(a.document);return L({url:f,query:p,variables:a.variables,headers:{..._(J(i)),..._(a.requestHeaders)},operationName:h,fetch:s,method:o,fetchOptions:c,middleware:u}).then(e=>(l&&l(e),e.data)).catch(e=>{throw l&&l(e),e})}batchRequests(e,t){let r=p(e,t),{headers:n,...a}=this.requestConfig;void 0!==r.signal&&(a.signal=r.signal);let i=r.documents.map(({document:e})=>j(e).query),s=r.documents.map(({variables:e})=>e);return L({url:this.url,query:i,variables:s,headers:{..._(J(n)),..._(r.requestHeaders)},operationName:void 0,fetch:this.requestConfig.fetch??O,method:this.requestConfig.method||"POST",fetchOptions:a,middleware:this.requestConfig.requestMiddleware}).then(e=>(this.requestConfig.responseMiddleware&&this.requestConfig.responseMiddleware(e),e.data)).catch(e=>{throw this.requestConfig.responseMiddleware&&this.requestConfig.responseMiddleware(e),e})}setHeaders(e){return this.requestConfig.headers=e,this}setHeader(e,t){let{headers:r}=this.requestConfig;return r?r[e]=t:this.requestConfig.headers={[e]:t},this}setEndpoint(e){return this.url=e,this}}let L=async e=>{let{query:t,variables:r,fetchOptions:a}=e,i=V(l(e.method??"post")),s=Array.isArray(e.query),o=await i(e),u=await B(o,a.jsonSerializer??n),c=Array.isArray(u)?!u.some(({data:e})=>!e):!!u.data,d=Array.isArray(u)||!u.errors||Array.isArray(u.errors)&&!u.errors.length||"all"===a.errorPolicy||"ignore"===a.errorPolicy;if(o.ok&&d&&c){let{errors:e,...t}=(Array.isArray(u),u),r="ignore"===a.errorPolicy?t:u;return{...s?{data:r}:r,headers:o.headers,status:o.status}}throw new E({..."string"==typeof u?{error:u}:u,status:o.status,headers:o.headers},{query:t,variables:r})},B=async(e,t)=>{let r;return(e.headers.forEach((e,t)=>{"content-type"===t.toLowerCase()&&(r=e)}),r&&(r.toLowerCase().startsWith("application/json")||r.toLowerCase().startsWith("application/graphql+json")||r.toLowerCase().startsWith("application/graphql-response+json")))?t.parse(await e.text()):e.text()},J=e=>"function"==typeof e?e():e}}]);